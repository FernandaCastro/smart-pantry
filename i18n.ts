export const DEFAULT_LANGUAGE = 'en' as const;

export const SUPPORTED_LANGUAGES = {
  en: { code: 'en', label: 'English', flag: 'ðŸ‡ºðŸ‡¸', speechLocale: 'en-US' },
  pt: { code: 'pt', label: 'PortuguÃªs', flag: 'ðŸ‡§ðŸ‡·', speechLocale: 'pt-BR' },
} as const;

export type Language = keyof typeof SUPPORTED_LANGUAGES;

const baseTranslations = {
  dashboard: 'Dashboard',
  pantry: 'Stock',
  shopping: 'Shopping',
  ai: 'AI',
  settings: 'Settings',
  totalItems: 'Total Items',
  missingItems: 'Missing',
  aiTitle: 'Artificial Intelligence',
  aiSub: 'See what you can cook with what you have today.',
  getSuggestions: 'Get Suggestions',
  thinking: 'Thinking...',
  lowStock: 'Low Stock Alert',
  searchPlaceholder: 'Search product...',
  addTitle: 'Add Product',
  editTitle: 'Edit Product',
  modalDescription: 'Fill in the details to keep your pantry organized.',
  nameLabel: 'Product Name',
  catLabel: 'Category',
  unitLabel: 'Unit',
  currQtyLabel: 'Current Qty',
  minQtyLabel: 'Minimum Target',
  cancel: 'Cancel',
  save: 'Save Item',
  updateItem: 'Update Changes',
  logout: 'Logout',
  login: 'Login',
  register: 'Create Account',
  loginWithGoogle: 'Sign in with Google',
  loginWithGitHub: 'Sign in with GitHub',
  email: 'Email',
  password: 'Password',
  userName: 'Your Name',
  welcome: 'Welcome',
  shareTitle: 'Share Pantry',
  shareSub: 'Invite someone by email',
  invite: 'Invite',
  collaborators: 'Collaborators',
  noCollaborators: 'No one shared yet.',
  printList: 'Print List',
  alreadyCollaborator: 'User already has access.',
  sharing: 'Sharing',
  pantryEmpty: 'Your pantry is empty.',
  stockOk: 'Everything stocked up!',
  stockAlertMsg: 'Only left',
  buyMsg: 'Buy',
  back: 'Back',
  language: 'Language',
  voiceAssist: 'Voice Assistant',
  listening: 'Listening...',
  stopVoice: 'Stop',
  voiceInstruction: "Say: 'Consumed 2 milks' or 'Added 1 rice'",
  productNotFound: 'Product not found to consume.',
  quantityUpdated: '{name} quantity updated!',
  productCreated: "New product '{name}' added!",
  finishPurchase: 'Finish Purchase',
  itemsSelected: 'items selected',
  purchasedQty: 'Purchased Qty',
  selectAll: 'Select All',
  deselectAll: 'Deselect All',
  removeFromList: 'Remove from List',
  bulkActions: 'Bulk Actions',
  newHere: "I'm new here",
  alreadyHaveAccount: 'Already have an account',
  authRegisterTitle: 'Create your account',
  authLoginTitle: 'Welcome back',
  appTagline: 'Smart pantry management',
  aiUnavailable: 'AI unavailable. Please try again later.',
  voiceUnavailable: 'Voice assistant is unavailable. Please try again later.',
  voiceUnavailableShort: 'Voice assistant is unavailable.',
  voiceRecognitionUnsupported: 'Voice recognition is not supported in this browser.',
  voiceNotUnderstood: 'I could not understand. Please try again.',
  voiceCaptureFailed: 'Could not capture audio. Please try again.',
  'category.cereals_grains': 'Cereals & Grains',
  'category.fruits_vegetables': 'Fruits & Vegetables',
  'category.canned_goods': 'Canned Goods',
  'category.meat_fish': 'Meat & Fish',
  'category.bakery': 'Bakery',
  'category.cooking_baking': 'Cooking & Baking',
  'category.sweets_savory_snacks': 'Sweets & Savory Snacks',
  'category.dairy': 'Dairy',
  'category.cleaning': 'Cleaning',
  'category.hygiene': 'Hygiene',
  'category.beverages': 'Beverages',
  'category.frozen': 'Frozen',
  'category.others': 'Others',
  'unit.un': 'unit',
  'unit.kg': 'kg',
  'unit.l': 'l',
  'unit.g': 'g',
  'unit.ml': 'ml',
  'unit.package': 'package',
  'unit.box': 'box',
} as const;

export type TranslationKey = keyof typeof baseTranslations;
type TranslationDictionary = Record<TranslationKey, string>;

export const translations: Record<Language, TranslationDictionary> = {
  en: { ...baseTranslations },
  pt: {
    dashboard: 'Dashboard',
    pantry: 'Estoque',
    shopping: 'Compras',
    ai: 'IA',
    settings: 'Ajustes',
    totalItems: 'Itens Totais',
    missingItems: 'Faltando',
    aiTitle: 'InteligÃªncia Artificial',
    aiSub: 'Veja o que vocÃª pode fazer com o que tem em casa hoje.',
    getSuggestions: 'Obter SugestÃµes',
    thinking: 'Pensando...',
    lowStock: 'Alerta de Estoque Baixo',
    searchPlaceholder: 'Buscar produto...',
    addTitle: 'Adicionar Produto',
    editTitle: 'Editar Produto',
    modalDescription: 'Preencha os detalhes para manter sua despensa organizada.',
    nameLabel: 'Nome do Produto',
    catLabel: 'Categoria',
    unitLabel: 'Unidade',
    currQtyLabel: 'Qtd Atual',
    minQtyLabel: 'MÃ­nimo Desejado',
    cancel: 'Cancelar',
    save: 'Salvar Item',
    updateItem: 'Salvar AlteraÃ§Ãµes',
    logout: 'Sair',
    login: 'Entrar',
    register: 'Criar Conta',
    loginWithGoogle: 'Entrar com Google',
    loginWithGitHub: 'Entrar com GitHub',
    email: 'E-mail',
    password: 'Senha',
    userName: 'Seu Nome',
    welcome: 'Bem-vindo',
    shareTitle: 'Compartilhar Despensa',
    shareSub: 'Convide alguÃ©m pelo e-mail',
    invite: 'Convidar',
    collaborators: 'Colaboradores',
    noCollaborators: 'NinguÃ©m compartilhado ainda.',
    printList: 'Imprimir Lista',
    alreadyCollaborator: 'Este usuÃ¡rio jÃ¡ tem acesso.',
    sharing: 'Compartilhamento',
    pantryEmpty: 'Sua despensa estÃ¡ vazia.',
    stockOk: 'Tudo abastecido por aqui!',
    stockAlertMsg: 'Restam apenas',
    buyMsg: 'Comprar',
    back: 'Voltar',
    language: 'Idioma',
    voiceAssist: 'Assistente de Voz',
    listening: 'Ouvindo...',
    stopVoice: 'Parar',
    voiceInstruction: "Diga algo como: 'Consumi 2 leites' ou 'Adicionei 1 arroz'",
    productNotFound: 'Produto nÃ£o encontrado para consumir.',
    quantityUpdated: 'Quantidade de {name} atualizada!',
    productCreated: "Novo produto '{name}' adicionado Ã  despensa!",
    finishPurchase: 'Finalizar Compra',
    itemsSelected: 'itens selecionados',
    purchasedQty: 'Qtd Comprada',
    selectAll: 'Selecionar Tudo',
    deselectAll: 'Desmarcar Tudo',
    removeFromList: 'Remover da Lista',
    bulkActions: 'AÃ§Ãµes em Lote',
    newHere: 'Sou novo por aqui',
    alreadyHaveAccount: 'JÃ¡ tenho uma conta',
    authRegisterTitle: 'Crie sua conta',
    authLoginTitle: 'Bem-vindo de volta',
    appTagline: 'Controle inteligente da despensa',
    aiUnavailable: 'IA indisponÃ­vel. Tente novamente mais tarde.',
    voiceUnavailable: 'Assistente de voz indisponÃ­vel. Tente novamente mais tarde.',
    voiceUnavailableShort: 'Assistente de voz indisponÃ­vel.',
    voiceRecognitionUnsupported: 'Reconhecimento de voz nÃ£o Ã© suportado neste navegador.',
    voiceNotUnderstood: 'NÃ£o consegui entender. Tente novamente.',
    voiceCaptureFailed: 'NÃ£o foi possÃ­vel capturar o Ã¡udio. Tente novamente.',
    'category.cereals_grains': 'Cereais & GrÃ£os',
    'category.fruits_vegetables': 'Frutas e Legumes',
    'category.canned_goods': 'Enlatados',
    'category.meat_fish': 'Carnes e Peixes',
    'category.bakery': 'Padaria',
    'category.cooking_baking': 'CulinÃ¡ria e Confeitaria',
    'category.sweets_savory_snacks': 'Doces e Salgados',
    'category.dairy': 'LaticÃ­nios',
    'category.cleaning': 'Limpeza',
    'category.hygiene': 'Higiene',
    'category.beverages': 'Bebidas',
    'category.frozen': 'Congelados',
    'category.others': 'Outros',
    'unit.un': 'un',
    'unit.kg': 'kg',
    'unit.l': 'l',
    'unit.g': 'g',
    'unit.ml': 'ml',
    'unit.package': 'pacote',
    'unit.box': 'caixa',
  },
};

export const isSupportedLanguage = (value: unknown): value is Language => (
  typeof value === 'string' && value in SUPPORTED_LANGUAGES
);

export const resolveLanguage = (value: unknown): Language => (
  isSupportedLanguage(value) ? value : DEFAULT_LANGUAGE
);

export const translate = (lang: Language, key: TranslationKey): string => (
  translations[lang][key] ?? translations[DEFAULT_LANGUAGE][key]
);

export const createTranslator = (lang: Language) => (key: TranslationKey) => translate(lang, key);
